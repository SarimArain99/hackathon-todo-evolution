apiVersion: v1
kind: Secret
metadata:
  name: todo-secrets
type: Opaque
stringData:
  # Sensitive configuration (FR-010)
  # These values are set via --set during helm install
  database-url: {{ .Values.backend.env.DATABASE_URL | quote }}
  auth-secret: {{ .Values.backend.env.BETTER_AUTH_SECRET | quote }}
  openai-api-key: {{ .Values.backend.env.OPENAI_API_KEY | quote }}
  {{- if .Values.postgres.enabled }}
  # PostgreSQL credentials (when postgres is enabled)
  {{- if .Values.postgres.user }}
  postgres-user: {{ .Values.postgres.user | quote }}
  {{- else }}
  postgres-user: "todo_user"
  {{- end }}
  {{- if .Values.postgres.password }}
  postgres-password: {{ .Values.postgres.password | quote }}
  {{- else }}
  postgres-password: "changeme"
  {{- end }}
  {{- end }}

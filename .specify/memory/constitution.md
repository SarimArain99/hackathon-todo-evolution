<!--
Sync Impact Report
==================
Version Change: 0.0.0 → 1.0.0 (MAJOR - Initial constitution creation)

Modified Principles: N/A (new constitution)

Added Sections:
- I. Spec-Driven Development (Non-Negotiable)
- II. Skills & Subagents First
- III. Context7 Knowledge Acquisition
- IV. No Manual Coding
- V. Phase Governance
- VI. Technology Constraints
- VII. Agent Behavior Rules
- VIII. Quality & Architecture Principles
- IX. Cloud-Native Readiness
- Technology Stack
- Development Workflow
- Governance

Removed Sections: N/A (template placeholders replaced)

Templates Requiring Updates:
- .specify/templates/plan-template.md ✅ Compatible (Constitution Check section aligns)
- .specify/templates/spec-template.md ✅ Compatible (user stories, requirements align)
- .specify/templates/tasks-template.md ✅ Compatible (phase structure aligns)
- .specify/templates/phr-template.prompt.md ✅ Compatible (no changes needed)

Follow-up TODOs: None
-->

# Hackathon II - Todo Evolution Constitution

This constitution governs the **Hackathon II - Todo Spec-Driven Development** project, covering all five phases from Console App to Cloud-Native AI Deployment.

## Core Principles

### I. Spec-Driven Development (NON-NEGOTIABLE)

No agent or human is permitted to write code until specifications are complete and approved. All work MUST follow the strict workflow:

**Constitution → Spec → Plan → Tasks → Implement**

- Every feature MUST begin with a specification defining WHAT to build
- Every implementation MUST have an approved plan defining HOW to build
- Every code change MUST reference a task ID from tasks.md
- No code may be written without approved specs and tasks
- Refinement MUST occur at spec level, not code level
- The spec is the single source of truth for all agents

**Rationale**: Spec-Driven Development ensures alignment across AI agents and humans, prevents "vibe coding," and guarantees every implementation step maps back to an explicit requirement. This is mandatory for hackathon evaluation.

### II. Skills & Subagents First

Before writing any implementation code, agents MUST leverage reusable intelligence:

- **Skills** (`.claude/skills/`): Reference skill documentation for domain-specific patterns
- **Subagents** (`.claude/agents/`): Delegate to specialized phase agents for complex tasks
- **Templates**: Use existing templates for consistent artifact generation

**Mandatory Workflow**:
1. Check if a skill exists for the technology being used
2. Reference the skill's SKILL.md for patterns and examples
3. Invoke appropriate subagent for phase-specific implementation
4. Build reusable components that can be used in future projects

**Rationale**: Reusable intelligence accelerates development, ensures consistency, and earns bonus points (+200) in the hackathon.

### III. Context7 Knowledge Acquisition

When working in any technology domain or learning new skills, agents MUST:

1. **Query Context7 MCP** for up-to-date documentation before implementing
2. **Resolve library IDs** using `mcp__context7__resolve-library-id` first
3. **Fetch documentation** using `mcp__context7__query-docs` for specific queries
4. **Update skills** when new patterns or APIs are discovered
5. **Never rely solely on training data** - always verify with Context7

**Supported Technologies** (fetch docs before using):
- FastAPI, Next.js, SQLModel, Better Auth
- OpenAI Agents SDK, MCP SDK
- Helm, Kafka, Dapr
- Docker, Kubernetes

**Rationale**: Context7 provides current, accurate documentation that prevents outdated patterns and ensures best practices are followed.

### IV. No Manual Coding

Human developers are NOT permitted to write code manually:

- All code MUST be generated by Claude Code via approved specifications
- Humans act as **Product Architects**, not syntax writers
- If Claude generates incorrect code, refine the **spec**, not the code
- The hackathon judges will review prompts, specs, and iterations

**Allowed Human Actions**:
- Writing and refining specifications
- Approving plans and tasks
- Running commands (git, docker, kubectl)
- Reviewing and accepting generated code
- Providing clarifications to agents

**Rationale**: This hackathon tests mastery of AI-native development where engineers guide AI agents rather than writing boilerplate.

### V. Phase Governance

The project consists of five sequential phases. Each phase is strictly scoped:

| Phase | Scope | Technology Stack |
|-------|-------|-----------------|
| I | In-Memory Console App | Python, UV, Rich |
| II | Full-Stack Web App | FastAPI, Next.js, SQLModel, Neon, Better Auth |
| III | AI Chatbot | OpenAI Agents SDK, MCP SDK, ChatKit |
| IV | Local Kubernetes | Docker, Helm, Minikube |
| V | Cloud Deployment | Kafka, Dapr, DOKS/AKS/GKE |

**Phase Rules**:
- Each phase builds on the previous - no skipping allowed
- Future-phase features MUST NOT leak into earlier phases
- Architecture may evolve ONLY through updated specs and plans
- Phase-specific agents in `.claude/agents/` define implementation protocols

**Rationale**: Progressive complexity ensures mastery at each level before advancing.

### VI. Technology Constraints

The following technology stack is MANDATORY:

**Backend**:
- Python 3.13+ with UV package manager
- FastAPI for REST APIs
- SQLModel for ORM
- Neon Serverless PostgreSQL for database

**Frontend**:
- Next.js 15+ with App Router
- TypeScript (strict mode)
- Tailwind CSS for styling

**AI Integration**:
- OpenAI Agents SDK for agent logic
- Official MCP SDK for tool servers
- OpenAI ChatKit for chat UI

**Infrastructure**:
- Docker for containerization
- Helm Charts for Kubernetes packaging
- Minikube for local K8s
- Dapr for distributed runtime
- Kafka/Redpanda for event streaming

**Authentication**:
- Better Auth with JWT tokens
- Shared secret between frontend and backend

**Rationale**: Standardized stack ensures judges can evaluate submissions consistently and students learn production-ready technologies.

### VII. Agent Behavior Rules

All AI agents in this project MUST obey:

1. **Never generate code without a referenced Task ID**
2. **Never modify architecture without updating plan.md**
3. **Never propose features without updating spec.md**
4. **Never change principles without updating constitution.md**
5. **Never invent new features** - only implement what specs define
6. **Never deviate from approved specifications**
7. **Stop and request clarification** if anything is underspecified

**Hierarchy of Authority** (when conflicts arise):
```
Constitution > Spec > Plan > Tasks
```

**Rationale**: Strict agent governance ensures predictable, deterministic development.

### VIII. Quality & Architecture Principles

**Clean Architecture**:
- Clear separation of concerns (models, services, routes)
- Single responsibility per module
- Dependency injection for testability
- No business logic in controllers/routes

**Code Quality**:
- Type hints required for all Python functions
- TypeScript strict mode for frontend
- Meaningful variable and function names
- No commented-out code in production

**Error Handling**:
- All errors MUST be handled gracefully
- User-friendly error messages
- Structured logging for debugging
- HTTP status codes used correctly

**Stateless Design** (Phases III-V):
- Server holds NO state between requests
- All state persisted to database
- Horizontal scalability enabled
- Session state via JWT tokens only

**Rationale**: Quality principles ensure maintainable, production-ready code.

### IX. Cloud-Native Readiness

All services MUST be designed for cloud deployment:

**Containerization**:
- Multi-stage Docker builds
- Minimal base images
- Non-root users in containers
- Health check endpoints

**Kubernetes**:
- Helm charts for all deployments
- Resource limits and requests defined
- Readiness and liveness probes
- ConfigMaps for configuration
- Secrets for sensitive data

**Observability**:
- Structured logging (JSON format)
- Health endpoints for all services
- Request tracing headers passed through

**Event-Driven Architecture** (Phase V):
- Kafka for async communication
- Dapr for infrastructure abstraction
- Decoupled services via pub/sub

**Rationale**: Cloud-native patterns ensure the application scales and operates reliably in production.

## Technology Stack

### Phase I
- Python 3.13+
- UV package manager
- Rich library for console UI

### Phase II-V Backend
- FastAPI
- SQLModel
- Pydantic
- Neon PostgreSQL
- Better Auth (JWT)

### Phase II-V Frontend
- Next.js 15+ (App Router)
- TypeScript
- Tailwind CSS
- Better Auth

### Phase III AI
- OpenAI Agents SDK
- Official MCP SDK
- OpenAI ChatKit

### Phase IV-V Infrastructure
- Docker
- Helm
- Minikube / DOKS / AKS / GKE
- Kafka / Redpanda
- Dapr

## Development Workflow

### Standard Development Cycle

```
1. /sp.specify  → Define WHAT to build
2. /sp.clarify  → Resolve ambiguities (if needed)
3. /sp.plan     → Define HOW to build
4. /sp.tasks    → Break into atomic work units
5. /sp.implement → Generate code via Claude Code
6. /sp.git.commit_pr → Commit and create PR
```

### Before Implementation Checklist

- [ ] Relevant skill documentation read from `.claude/skills/`
- [ ] Context7 queried for latest patterns (if needed)
- [ ] Phase-specific subagent referenced from `.claude/agents/`
- [ ] Constitution principles verified
- [ ] Spec approved
- [ ] Plan approved
- [ ] Tasks generated

### After Implementation Checklist

- [ ] All acceptance criteria met
- [ ] Error cases handled
- [ ] Code generated (not manually written)
- [ ] Task IDs referenced in commits
- [ ] PHR created for significant work

## Governance

This constitution is the **supreme governing document** for all agents and humans on this project.

### Amendment Process

1. Propose change via spec update
2. Document rationale
3. Update constitution.md
4. Increment version according to semver:
   - MAJOR: Principle removal/redefinition
   - MINOR: New principle/section added
   - PATCH: Clarification/typo fix
5. Notify all team members

### Compliance Review

- All PRs/reviews MUST verify constitution compliance
- Complexity MUST be justified via Complexity Tracking
- Violations MUST be documented and remediated

### Document Hierarchy

```
.specify/memory/constitution.md  → This file (WHY - Principles)
specs/<feature>/spec.md          → Feature requirements (WHAT)
specs/<feature>/plan.md          → Technical approach (HOW)
specs/<feature>/tasks.md         → Work units (BREAKDOWN)
```

### Agent Memory Files

- `.claude/skills/` - Technology documentation
- `.claude/agents/` - Phase-specific subagents
- `CLAUDE.md` - Claude Code instructions
- `history/prompts/` - Prompt History Records

**Version**: 1.0.0 | **Ratified**: 2025-12-29 | **Last Amended**: 2025-12-29
